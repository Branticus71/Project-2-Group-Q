---
title: "Project 2"
author: "Brant Armstrong, Lexi Field, Richard Xiao"
date: "2022-09-28"
output: html_document #Needs to be removed later, keeping it for now to test how the file knits.
---

Packages needed for our functions and data exploration.
```{r, message=FALSE}
library(tidyverse)
library(httr)
library(jsonlite)

#Brant's api key ?apiKey=965047400ad841198f2fd834535db269
```

Ideas for functions and analysis:
- Takes in a cuisine, diet, max time to cook, and number of recipes to return matching recipes use sort= random as default. 
  -Analysis could be comparing time to cook across different cuisines and diets. Plot average time to cook for each cuisine/diet. 
- Takes the ID's from the above function and returns nutrition information data as well as the nutrition label widget for a couple recipes.
  -Analysis could be breakdown of micro or macro nutrients by cuisine/diet. So fat content for Asian vs Mediterranean diet.
- Takes in a time frame, calories, diet, and any exclusions and returns a meal plan for that time frame.
  -Compare macronutrients for each diet choice.
- Takes the meal plan recipe ID's and gets the price per day.
  -Compare the prices for different diet meal plans.
- Takes in the meal plan and a selected day and returns the instructions for each meal that day.
- Takes in a type of wine, price, min rating, and number then returns a number of recommended wines.
  -Compare relationship of price and rating
- Takes in ingredients, number of recipes, and returns possible recipes.

# **Functions**


## Recipes for cuisine, diet, time to cook

```{r}
get_recipes <- function(cuisine, diet = "N/A", time, number = 10, API = "965047400ad841198f2fd834535db269"){
  
  if(diet == "N/A") {
    url <- paste0("https://api.spoonacular.com/recipes/complexSearch?apiKey=", API, "&cuisine=", cuisine,"&maxReadyTime=", time,                                    "&number=", number)
  } else{
    url <- paste0("https://api.spoonacular.com/recipes/complexSearch?apiKey=", API, "&cuisine=", cuisine, "&diet=", diet,"&maxReadyTime=", time,                    "&number=", number)
  }
  recipe_list <- fromJSON(url)
  recipe_sample <- recipe_list$results %>% select(id, title)
  return(recipe_sample)
}

Italian_no_diet <- get_recipes("Italian", time = 50)
Italian_Vegan <- get_recipes("Italian", "Vegan", time = 50)
Italian_no_diet
Italian_Vegan
```




## Wine retrieval function
```{r}
get_wine <- function(type, price, number = 10, API = "965047400ad841198f2fd834535db269"){
  url <- paste0("https://api.spoonacular.com/food/wine/recommendation?apiKey=", API, "&wine=", type, "&maxPrice=", price, "&number=", number)
  wine_list <- fromJSON(url)
  wine_rec <- wine_list$recommendedWines %>% 
    select(id, price, averageRating, ratingCount, score) %>% 
    mutate(type = type)
  return(wine_rec)
}

get_wine("merlot", 50)

```

